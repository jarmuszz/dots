map() {
	# Mapping function
	while read -r args; do $@ $args; done
}

lam() {
	# Lambda
	[ -z "$1" ] && return 1

	fname="l$(head -1 /dev/urandom | sha1)"
	eval "$fname"'()' "{ $1; }"
	shift
	$fname $@

	unset -f $fname 
	unset -v fname
}

lmap() {
	map "lam $@ $(cat /dev/stdin)"
}
